import React, { createContext, useContext, useMemo } from "react";

// Supported languages configuration
export const supportedLanguages = {
  en: { name: "English", nativeName: "English" },
  es: { name: "Spanish", nativeName: "Español" },
  zht: { name: "Chinese (Traditional)", nativeName: "繁體中文" },
  zhs: { name: "Chinese (Simplified)", nativeName: "简体中文" },
  ja: { name: "Japanese", nativeName: "日本語" },
  ko: { name: "Korean", nativeName: "한국어" },
  de: { name: "German", nativeName: "Deutsch" },
  fr: { name: "French", nativeName: "Français" },
  pt: { name: "Portuguese", nativeName: "Português" },
  it: { name: "Italian", nativeName: "Italiano" },
  ru: { name: "Russian", nativeName: "Русский" },
  ar: { name: "Arabic", nativeName: "العربية" },
  hi: { name: "Hindi", nativeName: "हिन्दी" },
  th: { name: "Thai", nativeName: "ไทย" },
  vi: { name: "Vietnamese", nativeName: "Tiếng Việt" },
  id: { name: "Indonesian", nativeName: "Bahasa Indonesia" },
  ms: { name: "Malay", nativeName: "Bahasa Melayu" },
  nl: { name: "Dutch", nativeName: "Nederlands" },
  pl: { name: "Polish", nativeName: "Polski" },
  tr: { name: "Turkish", nativeName: "Türkçe" },
};

const translations = {
  en: {
    header: {
      title: "MMMF",
      tagline: "Max Money Market Funds. Forecast Best MMF Deposit Amount.",
      github: "View on GitHub",
    },
    common: {
      cancel: "Cancel",
      add: "Add",
      save: "Save",
      today: "Today",
      selectDate: "Select a date",
      auto: "Auto",
    },
    balance: {
      accountBalance: "Account Balance",
      startingBalance: "Starting Balance",
      forecastedBalance: "Forecasted Balance",
      netChange: "Net Change",
      lowestBalance: "Lowest Balance",
      onDate: "on",
      startingBalanceRow: "Starting Balance",
    },
    forecast: {
      settings: "Forecast Settings",
      currentDate: "Current Date",
      forecastUntil: "Forecast Until",
      quick30: "30 days",
      quick60: "60 days",
      quick90: "90 days",
      daysFromCurrent: "days from current date",
      selectFutureDate: "Select a future date",
      clearAll: "Clear All Transactions",
      clearNote: "This will keep your recurring transactions",
    },
    transactions: {
      addTransaction: "Add Transaction",
      description: "Description",
      amount: "Amount",
      type: "Type",
      debitPayment: "Debit (Payment)",
      creditIncome: "Credit (Income)",
      date: "Date",
      addBtn: "Add Transaction",
      fillAllFields: "Please fill in all fields",
      listTitle: (count) => `Transactions (${count})`,
      noneYet: "No transactions yet",
      getStarted: "Add your first transaction to get started",
      delete: "Delete transaction",
      descriptionPh: "e.g., 0DTE SPY Call Margin Requirement",
      amountPh: "0.00",
    },
    recurring: {
      title: "Recurring Transactions",
      addButton: "+ Add",
      saveRecurring: "Save Recurring Transaction",
      noRecurring: "No recurring transactions",
      autoNote: "Recurring transactions are auto-generated each month",
      payment: "Payment",
      income: "Income",
      descriptionPh: "Description",
      amountPh: "Amount",
      dayOfMonthPh: "Day of Month (1-31)",
      dayOfMonth: (day) => `Day ${day} of month`,
      clickToEditDesc: "Click to edit description",
      clickToEditAmount: "Click to edit amount",
      deleteRecurring: "Delete recurring transaction",
      validationAll: "Please fill in all fields",
      validationDayRange: "Day of month must be between 1 and 31",
    },
    cards: {
      title: "Recurring Credit Cards",
      saveCard: "Save Credit Card",
      noCards: "No credit cards",
      addNote: "Add credit cards to quickly enter payments",
      cardNamePh: "Card Name (e.g., Chase Sapphire)",
      deleteCard: "Delete credit card",
      dayOfMonth: (day) => `Day ${day} of month`,
      clickToEditName: "Click to edit name",
      next: "Next:",
      addPayment: "Add Payment",
      noUpcoming: "No upcoming date",
      paymentDate: "Payment date:",
      enterAmount: "Please enter amount",
      noUpcomingInRange: "No upcoming payment date within forecast range",
    },
    timeline: {
      title: "Balance Timeline",
      action: "Action",
      description: "Description",
      amount: "Amount",
      balance: "Balance",
      date: "Date",
      delete: "Delete transaction",
    },
    settings: {
      globalSettings: "Global Settings",
      darkMode: "Dark Mode",
      lightMode: "Light Mode",
      language: "Language",
      currency: "Currency",
      dateFormat: "Date Format",
    },
    datepicker: {
      weekdaysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    },
  },
  es: {
    header: {
      title: "MMMF",
      tagline:
        "Fondos del Mercado Monetario Máximos. Pronostica el mejor depósito en MMF.",
      github: "Ver en GitHub",
    },
    common: {
      cancel: "Cancelar",
      add: "Agregar",
      save: "Guardar",
      today: "Hoy",
      selectDate: "Selecciona una fecha",
      auto: "Auto",
    },
    balance: {
      accountBalance: "Saldo de la cuenta",
      startingBalance: "Saldo inicial",
      forecastedBalance: "Saldo proyectado",
      netChange: "Cambio neto",
      lowestBalance: "Saldo más bajo",
      onDate: "el",
      startingBalanceRow: "Saldo inicial",
    },
    forecast: {
      settings: "Configuración de pronóstico",
      currentDate: "Fecha actual",
      forecastUntil: "Pronosticar hasta",
      quick30: "30 días",
      quick60: "60 días",
      quick90: "90 días",
      daysFromCurrent: "días desde la fecha actual",
      selectFutureDate: "Selecciona una fecha futura",
      clearAll: "Borrar todas las transacciones",
      clearNote: "Se mantendrán las transacciones recurrentes",
    },
    transactions: {
      addTransaction: "Agregar transacción",
      description: "Descripción",
      amount: "Monto",
      type: "Tipo",
      debitPayment: "Débito (Pago)",
      creditIncome: "Crédito (Ingreso)",
      date: "Fecha",
      addBtn: "Agregar transacción",
      fillAllFields: "Por favor completa todos los campos",
      listTitle: (count) => `Transacciones (${count})`,
      noneYet: "Sin transacciones",
      getStarted: "Agrega tu primera transacción para comenzar",
      delete: "Eliminar transacción",
      descriptionPh: "ej., Requisito de margen de call SPY 0DTE",
      amountPh: "0.00",
    },
    recurring: {
      title: "Transacciones recurrentes",
      addButton: "+ Agregar",
      saveRecurring: "Guardar transacción recurrente",
      noRecurring: "Sin transacciones recurrentes",
      autoNote:
        "Las transacciones recurrentes se generan automáticamente cada mes",
      payment: "Pago",
      income: "Ingreso",
      descriptionPh: "Descripción",
      amountPh: "Monto",
      dayOfMonthPh: "Día del mes (1-31)",
      dayOfMonth: (day) => `Día ${day} del mes`,
      clickToEditDesc: "Haz clic para editar la descripción",
      clickToEditAmount: "Haz clic para editar el monto",
      deleteRecurring: "Eliminar transacción recurrente",
      validationAll: "Por favor completa todos los campos",
      validationDayRange: "El día del mes debe estar entre 1 y 31",
    },
    cards: {
      title: "Tarjetas de crédito recurrentes",
      saveCard: "Guardar tarjeta",
      noCards: "Sin tarjetas de crédito",
      addNote: "Agrega tarjetas para ingresar pagos rápidamente",
      cardNamePh: "Nombre de la tarjeta (ej., Chase Sapphire)",
      deleteCard: "Eliminar tarjeta",
      dayOfMonth: (day) => `Día ${day} del mes`,
      clickToEditName: "Haz clic para editar el nombre",
      next: "Próximo:",
      addPayment: "Agregar pago",
      noUpcoming: "Sin fecha próxima",
      paymentDate: "Fecha de pago:",
      enterAmount: "Por favor ingresa un monto",
      noUpcomingInRange: "No hay fecha de pago dentro del rango",
    },
    timeline: {
      title: "Línea de tiempo del saldo",
      action: "Acción",
      description: "Descripción",
      amount: "Monto",
      balance: "Saldo",
      date: "Fecha",
      delete: "Eliminar transacción",
    },
    settings: {
      globalSettings: "Configuración global",
      darkMode: "Modo oscuro",
      lightMode: "Modo claro",
      language: "Idioma",
      currency: "Moneda",
      dateFormat: "Formato de fecha",
    },
    datepicker: {
      weekdaysShort: ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"],
    },
  },
  zht: {
    header: {
      title: "MMMF",
      tagline: "未來帳戶餘額預測工具",
      github: "在 GitHub 上查看",
    },
    common: {
      cancel: "取消",
      add: "新增",
      save: "儲存",
      today: "今天",
      selectDate: "選擇日期",
      auto: "自動",
    },
    balance: {
      accountBalance: "帳戶餘額",
      startingBalance: "起始金額",
      forecastedBalance: "預測餘額",
      netChange: "淨變化",
      lowestBalance: "最低餘額",
      onDate: "於",
      startingBalanceRow: "起始金額",
    },
    forecast: {
      settings: "設定",
      currentDate: "開始日期",
      forecastUntil: "預測至日期",
      quick30: "30 天",
      quick60: "60 天",
      quick90: "90 天",
      daysFromCurrent: "總共天數",
      selectFutureDate: "選擇未來日期",
      clearAll: "清除所有交易紀錄",
      clearNote: "這會保留您的重複性扣款",
    },
    transactions: {
      addTransaction: "單筆輸入",
      description: "描述",
      amount: "金額",
      type: "類型",
      debitPayment: "支出",
      creditIncome: "收入",
      date: "日期",
      addBtn: "新增款項",
      fillAllFields: "請填寫所有欄位",
      listTitle: (count) => `交易（${count}）`,
      noneYet: "尚無交易",
      getStarted: "新增您的第一筆交易以開始使用",
      delete: "刪除交易",
      descriptionPh: "例如：0DTE SPY 期權當沖保證金要求",
      amountPh: "0.00",
    },
    recurring: {
      title: "重複性扣款",
      addButton: "+ 新增",
      saveRecurring: "儲存重複性扣款",
      noRecurring: "無重複性扣款",
      autoNote: "重複性扣款會於每個月自動生成",
      payment: "支出",
      income: "收入",
      descriptionPh: "描述",
      amountPh: "金額",
      dayOfMonthPh: "每月日期（1-31）",
      dayOfMonth: (day) => `每月第 ${day} 天`,
      clickToEditDesc: "點擊編輯描述",
      clickToEditAmount: "點擊編輯金額",
      deleteRecurring: "刪除定期交易",
      validationAll: "請填寫所有欄位",
      validationDayRange: "每月日期必須在 1 到 31 之間",
    },
    cards: {
      title: "定期信用卡",
      saveCard: "儲存信用卡",
      noCards: "無信用卡",
      addNote: "新增信用卡以快速輸入付款",
      cardNamePh: "卡片名稱（例如：富邦信用卡）",
      deleteCard: "刪除信用卡",
      dayOfMonth: (day) => `每月第 ${day} 天`,
      clickToEditName: "點擊編輯名稱",
      next: "下次：",
      addPayment: "新增付款",
      noUpcoming: "無即將到來的日期",
      paymentDate: "付款日期：",
      enterAmount: "請輸入金額",
      noUpcomingInRange: "預測範圍內無即將到來的付款日期",
    },
    timeline: {
      title: "餘額時間軸",
      action: "操作",
      description: "描述",
      amount: "金額",
      balance: "餘額",
      date: "日期",
      delete: "刪除交易",
    },
    settings: {
      globalSettings: "全域設定",
      darkMode: "深色模式",
      lightMode: "淺色模式",
      language: "語言",
      currency: "貨幣",
      dateFormat: "日期格式",
    },
    datepicker: {
      weekdaysShort: ["日", "一", "二", "三", "四", "五", "六"],
    },
  },
  ja: {
    header: {
      title: "MMMF",
      tagline: "未来口座残高の予測",
      github: "GitHub で見る",
    },
    common: {
      cancel: "キャンセル",
      add: "追加",
      save: "保存",
      today: "今日",
      selectDate: "日付を選択",
      auto: "自動",
    },
    balance: {
      accountBalance: "口座残高",
      startingBalance: "開始残高",
      forecastedBalance: "予測残高",
      netChange: "純変化",
      lowestBalance: "最低残高",
      onDate: "予測日",
      startingBalanceRow: "開始残高",
    },
    forecast: {
      settings: "予測設定",
      currentDate: "現在の日付",
      forecastUntil: "予測期間",
      quick30: "30日",
      quick60: "60日",
      quick90: "90日",
      daysFromCurrent: "日（現在の日付から）",
      selectFutureDate: "将来の日付を選択",
      clearAll: "すべての取引をクリア",
      clearNote: "定期取引は保持されます",
    },
    transactions: {
      addTransaction: "取引を追加",
      description: "説明",
      amount: "金額",
      type: "タイプ",
      debitPayment: "支払い",
      creditIncome: "収入",
      date: "日付",
      addBtn: "取引を追加",
      fillAllFields: "すべてのフィールドを入力してください",
      listTitle: (count) => `取引（${count}）`,
      noneYet: "取引がありません",
      getStarted: "最初の取引を追加して開始",
      delete: "取引を削除",
      descriptionPh: "例：0DTE SPY 先物オプション保証金",
      amountPh: "0.00",
    },
    recurring: {
      title: "定期取引",
      addButton: "+ 追加",
      saveRecurring: "定期取引を保存",
      noRecurring: "定期取引がありません",
      autoNote: "定期取引は毎月自動生成されます",
      payment: "支払い",
      income: "収入",
      descriptionPh: "説明",
      amountPh: "金額",
      dayOfMonthPh: "月の日（1-31）",
      dayOfMonth: (day) => `毎月${day}日`,
      clickToEditDesc: "クリックして説明を編集",
      clickToEditAmount: "クリックして金額を編集",
      deleteRecurring: "定期取引を削除",
      validationAll: "すべてのフィールドを入力してください",
      validationDayRange: "月の日は1から31の間でなければなりません",
    },
    cards: {
      title: "定期クレジットカード",
      saveCard: "クレジットカードを保存",
      noCards: "クレジットカードがありません",
      addNote: "支払いを素早く入力するためにクレジットカードを追加",
      cardNamePh: "カード名（例：エポスカード）",
      deleteCard: "クレジットカードを削除",
      dayOfMonth: (day) => `毎月${day}日`,
      clickToEditName: "クリックして名前を編集",
      next: "次回：",
      addPayment: "支払いを追加",
      noUpcoming: "予定日なし",
      paymentDate: "支払日：",
      enterAmount: "金額を入力してください",
      noUpcomingInRange: "予測範囲内に支払日がありません",
    },
    timeline: {
      title: "残高タイムライン",
      action: "アクション",
      description: "説明",
      amount: "金額",
      balance: "残高",
      date: "日付",
      delete: "取引を削除",
    },
    settings: {
      globalSettings: "グローバル設定",
      darkMode: "ダークモード",
      lightMode: "ライトモード",
      language: "言語",
      currency: "通貨",
      dateFormat: "日付形式",
    },
    datepicker: {
      weekdaysShort: ["日", "月", "火", "水", "木", "金", "土"],
    },
  },
  // Simplified Chinese (简体中文)
  zhs: {
    header: {
      title: "MMMF",
      tagline: "资金市场基金预测工具",
      github: "在 GitHub 上查看",
    },
    common: {
      cancel: "取消",
      add: "添加",
      save: "保存",
      today: "今天",
      selectDate: "选择日期",
      auto: "自动",
    },
    balance: {
      accountBalance: "账户余额",
      startingBalance: "初始余额",
      forecastedBalance: "预测余额",
      netChange: "净变化",
      lowestBalance: "最低余额",
      onDate: "于",
      startingBalanceRow: "初始余额",
    },
    forecast: {
      settings: "预测设置",
      currentDate: "当前日期",
      forecastUntil: "预测至",
      quick30: "30 天",
      quick60: "60 天",
      quick90: "90 天",
      daysFromCurrent: "天（从当前日期起）",
      selectFutureDate: "选择未来日期",
      clearAll: "清除所有交易",
      clearNote: "这将保留您的定期交易",
    },
    transactions: {
      addTransaction: "添加交易",
      description: "描述",
      amount: "金额",
      type: "类型",
      debitPayment: "支出",
      creditIncome: "收入",
      date: "日期",
      addBtn: "添加交易",
      fillAllFields: "请填写所有字段",
      listTitle: (count) => `交易 (${count})`,
      noneYet: "暂无交易",
      getStarted: "添加您的第一笔交易以开始",
      delete: "删除交易",
      descriptionPh: "例如：房租支付",
      amountPh: "0.00",
    },
    recurring: {
      title: "定期交易",
      addButton: "+ 添加",
      saveRecurring: "保存定期交易",
      noRecurring: "暂无定期交易",
      autoNote: "定期交易每月自动生成",
      payment: "支出",
      income: "收入",
      descriptionPh: "描述",
      amountPh: "金额",
      dayOfMonthPh: "每月日期（1-31）",
      dayOfMonth: (day) => `每月第 ${day} 天`,
      clickToEditDesc: "点击编辑描述",
      clickToEditAmount: "点击编辑金额",
      deleteRecurring: "删除定期交易",
      validationAll: "请填写所有字段",
      validationDayRange: "每月日期必须在 1 到 31 之间",
    },
    cards: {
      title: "定期信用卡",
      saveCard: "保存信用卡",
      noCards: "暂无信用卡",
      addNote: "添加信用卡以快速输入付款",
      cardNamePh: "卡片名称（例如：招商银行信用卡）",
      deleteCard: "删除信用卡",
      dayOfMonth: (day) => `每月第 ${day} 天`,
      clickToEditName: "点击编辑名称",
      next: "下次：",
      addPayment: "添加付款",
      noUpcoming: "无即将到来的日期",
      paymentDate: "付款日期：",
      enterAmount: "请输入金额",
      noUpcomingInRange: "预测范围内无即将到来的付款日期",
    },
    timeline: {
      title: "余额时间线",
      action: "操作",
      description: "描述",
      amount: "金额",
      balance: "余额",
      date: "日期",
      delete: "删除交易",
    },
    settings: {
      globalSettings: "全局设置",
      darkMode: "深色模式",
      lightMode: "浅色模式",
      language: "语言",
      currency: "货币",
      dateFormat: "日期格式",
    },
    datepicker: {
      weekdaysShort: ["日", "一", "二", "三", "四", "五", "六"],
    },
  },
  // Korean (한국어)
  ko: {
    header: {
      title: "MMMF",
      tagline: "자금 시장 펀드 예측 도구",
      github: "GitHub에서 보기",
    },
    common: {
      cancel: "취소",
      add: "추가",
      save: "저장",
      today: "오늘",
      selectDate: "날짜 선택",
      auto: "자동",
    },
    balance: {
      accountBalance: "계좌 잔액",
      startingBalance: "시작 잔액",
      forecastedBalance: "예측 잔액",
      netChange: "순 변동",
      lowestBalance: "최저 잔액",
      onDate: "일자",
      startingBalanceRow: "시작 잔액",
    },
    forecast: {
      settings: "예측 설정",
      currentDate: "현재 날짜",
      forecastUntil: "예측 기간",
      quick30: "30일",
      quick60: "60일",
      quick90: "90일",
      daysFromCurrent: "일 (현재 날짜부터)",
      selectFutureDate: "미래 날짜 선택",
      clearAll: "모든 거래 삭제",
      clearNote: "정기 거래는 유지됩니다",
    },
    transactions: {
      addTransaction: "거래 추가",
      description: "설명",
      amount: "금액",
      type: "유형",
      debitPayment: "지출",
      creditIncome: "수입",
      date: "날짜",
      addBtn: "거래 추가",
      fillAllFields: "모든 필드를 입력해주세요",
      listTitle: (count) => `거래 (${count})`,
      noneYet: "거래 없음",
      getStarted: "첫 번째 거래를 추가하여 시작하세요",
      delete: "거래 삭제",
      descriptionPh: "예: 월세",
      amountPh: "0.00",
    },
    recurring: {
      title: "정기 거래",
      addButton: "+ 추가",
      saveRecurring: "정기 거래 저장",
      noRecurring: "정기 거래 없음",
      autoNote: "정기 거래는 매월 자동 생성됩니다",
      payment: "지출",
      income: "수입",
      descriptionPh: "설명",
      amountPh: "금액",
      dayOfMonthPh: "매월 일자 (1-31)",
      dayOfMonth: (day) => `매월 ${day}일`,
      clickToEditDesc: "클릭하여 설명 편집",
      clickToEditAmount: "클릭하여 금액 편집",
      deleteRecurring: "정기 거래 삭제",
      validationAll: "모든 필드를 입력해주세요",
      validationDayRange: "매월 일자는 1에서 31 사이여야 합니다",
    },
    cards: {
      title: "정기 신용카드",
      saveCard: "신용카드 저장",
      noCards: "신용카드 없음",
      addNote: "빠른 결제 입력을 위해 신용카드를 추가하세요",
      cardNamePh: "카드 이름 (예: 삼성카드)",
      deleteCard: "신용카드 삭제",
      dayOfMonth: (day) => `매월 ${day}일`,
      clickToEditName: "클릭하여 이름 편집",
      next: "다음:",
      addPayment: "결제 추가",
      noUpcoming: "예정된 날짜 없음",
      paymentDate: "결제일:",
      enterAmount: "금액을 입력해주세요",
      noUpcomingInRange: "예측 범위 내에 결제일이 없습니다",
    },
    timeline: {
      title: "잔액 타임라인",
      action: "작업",
      description: "설명",
      amount: "금액",
      balance: "잔액",
      date: "날짜",
      delete: "거래 삭제",
    },
    settings: {
      globalSettings: "전역 설정",
      darkMode: "다크 모드",
      lightMode: "라이트 모드",
      language: "언어",
      currency: "통화",
      dateFormat: "날짜 형식",
    },
    datepicker: {
      weekdaysShort: ["일", "월", "화", "수", "목", "금", "토"],
    },
  },
  // German (Deutsch)
  de: {
    header: {
      title: "MMMF",
      tagline: "Geldmarktfonds-Prognose-Tool",
      github: "Auf GitHub ansehen",
    },
    common: {
      cancel: "Abbrechen",
      add: "Hinzufügen",
      save: "Speichern",
      today: "Heute",
      selectDate: "Datum auswählen",
      auto: "Auto",
    },
    balance: {
      accountBalance: "Kontostand",
      startingBalance: "Anfangssaldo",
      forecastedBalance: "Prognostizierter Saldo",
      netChange: "Nettoveränderung",
      lowestBalance: "Niedrigster Saldo",
      onDate: "am",
      startingBalanceRow: "Anfangssaldo",
    },
    forecast: {
      settings: "Prognose-Einstellungen",
      currentDate: "Aktuelles Datum",
      forecastUntil: "Prognose bis",
      quick30: "30 Tage",
      quick60: "60 Tage",
      quick90: "90 Tage",
      daysFromCurrent: "Tage ab aktuellem Datum",
      selectFutureDate: "Zukünftiges Datum auswählen",
      clearAll: "Alle Transaktionen löschen",
      clearNote: "Wiederkehrende Transaktionen bleiben erhalten",
    },
    transactions: {
      addTransaction: "Transaktion hinzufügen",
      description: "Beschreibung",
      amount: "Betrag",
      type: "Typ",
      debitPayment: "Ausgabe",
      creditIncome: "Einnahme",
      date: "Datum",
      addBtn: "Transaktion hinzufügen",
      fillAllFields: "Bitte alle Felder ausfüllen",
      listTitle: (count) => `Transaktionen (${count})`,
      noneYet: "Keine Transaktionen",
      getStarted: "Fügen Sie Ihre erste Transaktion hinzu",
      delete: "Transaktion löschen",
      descriptionPh: "z.B. Miete",
      amountPh: "0,00",
    },
    recurring: {
      title: "Wiederkehrende Transaktionen",
      addButton: "+ Hinzufügen",
      saveRecurring: "Wiederkehrende Transaktion speichern",
      noRecurring: "Keine wiederkehrenden Transaktionen",
      autoNote:
        "Wiederkehrende Transaktionen werden monatlich automatisch generiert",
      payment: "Ausgabe",
      income: "Einnahme",
      descriptionPh: "Beschreibung",
      amountPh: "Betrag",
      dayOfMonthPh: "Tag des Monats (1-31)",
      dayOfMonth: (day) => `Tag ${day} des Monats`,
      clickToEditDesc: "Klicken zum Bearbeiten der Beschreibung",
      clickToEditAmount: "Klicken zum Bearbeiten des Betrags",
      deleteRecurring: "Wiederkehrende Transaktion löschen",
      validationAll: "Bitte alle Felder ausfüllen",
      validationDayRange: "Der Tag muss zwischen 1 und 31 liegen",
    },
    cards: {
      title: "Wiederkehrende Kreditkarten",
      saveCard: "Kreditkarte speichern",
      noCards: "Keine Kreditkarten",
      addNote: "Kreditkarten hinzufügen für schnelle Zahlungseingabe",
      cardNamePh: "Kartenname (z.B. Visa)",
      deleteCard: "Kreditkarte löschen",
      dayOfMonth: (day) => `Tag ${day} des Monats`,
      clickToEditName: "Klicken zum Bearbeiten des Namens",
      next: "Nächste:",
      addPayment: "Zahlung hinzufügen",
      noUpcoming: "Kein anstehendes Datum",
      paymentDate: "Zahlungsdatum:",
      enterAmount: "Bitte Betrag eingeben",
      noUpcomingInRange: "Kein Zahlungsdatum im Prognosezeitraum",
    },
    timeline: {
      title: "Saldo-Zeitachse",
      action: "Aktion",
      description: "Beschreibung",
      amount: "Betrag",
      balance: "Saldo",
      date: "Datum",
      delete: "Transaktion löschen",
    },
    settings: {
      globalSettings: "Globale Einstellungen",
      darkMode: "Dunkelmodus",
      lightMode: "Hellmodus",
      language: "Sprache",
      currency: "Währung",
      dateFormat: "Datumsformat",
    },
    datepicker: {
      weekdaysShort: ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"],
    },
  },
  // French (Français)
  fr: {
    header: {
      title: "MMMF",
      tagline: "Outil de prévision des fonds du marché monétaire",
      github: "Voir sur GitHub",
    },
    common: {
      cancel: "Annuler",
      add: "Ajouter",
      save: "Enregistrer",
      today: "Aujourd'hui",
      selectDate: "Sélectionner une date",
      auto: "Auto",
    },
    balance: {
      accountBalance: "Solde du compte",
      startingBalance: "Solde initial",
      forecastedBalance: "Solde prévu",
      netChange: "Variation nette",
      lowestBalance: "Solde le plus bas",
      onDate: "le",
      startingBalanceRow: "Solde initial",
    },
    forecast: {
      settings: "Paramètres de prévision",
      currentDate: "Date actuelle",
      forecastUntil: "Prévoir jusqu'au",
      quick30: "30 jours",
      quick60: "60 jours",
      quick90: "90 jours",
      daysFromCurrent: "jours à partir de la date actuelle",
      selectFutureDate: "Sélectionner une date future",
      clearAll: "Effacer toutes les transactions",
      clearNote: "Cela conservera vos transactions récurrentes",
    },
    transactions: {
      addTransaction: "Ajouter une transaction",
      description: "Description",
      amount: "Montant",
      type: "Type",
      debitPayment: "Débit (Paiement)",
      creditIncome: "Crédit (Revenu)",
      date: "Date",
      addBtn: "Ajouter la transaction",
      fillAllFields: "Veuillez remplir tous les champs",
      listTitle: (count) => `Transactions (${count})`,
      noneYet: "Aucune transaction",
      getStarted: "Ajoutez votre première transaction pour commencer",
      delete: "Supprimer la transaction",
      descriptionPh: "ex. Loyer",
      amountPh: "0,00",
    },
    recurring: {
      title: "Transactions récurrentes",
      addButton: "+ Ajouter",
      saveRecurring: "Enregistrer la transaction récurrente",
      noRecurring: "Aucune transaction récurrente",
      autoNote:
        "Les transactions récurrentes sont générées automatiquement chaque mois",
      payment: "Paiement",
      income: "Revenu",
      descriptionPh: "Description",
      amountPh: "Montant",
      dayOfMonthPh: "Jour du mois (1-31)",
      dayOfMonth: (day) => `Jour ${day} du mois`,
      clickToEditDesc: "Cliquer pour modifier la description",
      clickToEditAmount: "Cliquer pour modifier le montant",
      deleteRecurring: "Supprimer la transaction récurrente",
      validationAll: "Veuillez remplir tous les champs",
      validationDayRange: "Le jour doit être entre 1 et 31",
    },
    cards: {
      title: "Cartes de crédit récurrentes",
      saveCard: "Enregistrer la carte",
      noCards: "Aucune carte de crédit",
      addNote: "Ajouter des cartes pour une saisie rapide des paiements",
      cardNamePh: "Nom de la carte (ex. Visa)",
      deleteCard: "Supprimer la carte",
      dayOfMonth: (day) => `Jour ${day} du mois`,
      clickToEditName: "Cliquer pour modifier le nom",
      next: "Prochain:",
      addPayment: "Ajouter un paiement",
      noUpcoming: "Aucune date à venir",
      paymentDate: "Date de paiement:",
      enterAmount: "Veuillez entrer un montant",
      noUpcomingInRange: "Aucune date de paiement dans la période prévue",
    },
    timeline: {
      title: "Chronologie du solde",
      action: "Action",
      description: "Description",
      amount: "Montant",
      balance: "Solde",
      date: "Date",
      delete: "Supprimer la transaction",
    },
    settings: {
      globalSettings: "Paramètres globaux",
      darkMode: "Mode sombre",
      lightMode: "Mode clair",
      language: "Langue",
      currency: "Devise",
      dateFormat: "Format de date",
    },
    datepicker: {
      weekdaysShort: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"],
    },
  },
  // Portuguese (Português)
  pt: {
    header: {
      title: "MMMF",
      tagline: "Ferramenta de previsão de fundos do mercado monetário",
      github: "Ver no GitHub",
    },
    common: {
      cancel: "Cancelar",
      add: "Adicionar",
      save: "Salvar",
      today: "Hoje",
      selectDate: "Selecionar data",
      auto: "Auto",
    },
    balance: {
      accountBalance: "Saldo da conta",
      startingBalance: "Saldo inicial",
      forecastedBalance: "Saldo previsto",
      netChange: "Variação líquida",
      lowestBalance: "Saldo mais baixo",
      onDate: "em",
      startingBalanceRow: "Saldo inicial",
    },
    forecast: {
      settings: "Configurações de previsão",
      currentDate: "Data atual",
      forecastUntil: "Prever até",
      quick30: "30 dias",
      quick60: "60 dias",
      quick90: "90 dias",
      daysFromCurrent: "dias a partir da data atual",
      selectFutureDate: "Selecionar data futura",
      clearAll: "Limpar todas as transações",
      clearNote: "Isso manterá suas transações recorrentes",
    },
    transactions: {
      addTransaction: "Adicionar transação",
      description: "Descrição",
      amount: "Valor",
      type: "Tipo",
      debitPayment: "Débito (Pagamento)",
      creditIncome: "Crédito (Receita)",
      date: "Data",
      addBtn: "Adicionar transação",
      fillAllFields: "Por favor, preencha todos os campos",
      listTitle: (count) => `Transações (${count})`,
      noneYet: "Nenhuma transação",
      getStarted: "Adicione sua primeira transação para começar",
      delete: "Excluir transação",
      descriptionPh: "ex. Aluguel",
      amountPh: "0,00",
    },
    recurring: {
      title: "Transações recorrentes",
      addButton: "+ Adicionar",
      saveRecurring: "Salvar transação recorrente",
      noRecurring: "Nenhuma transação recorrente",
      autoNote: "Transações recorrentes são geradas automaticamente todo mês",
      payment: "Pagamento",
      income: "Receita",
      descriptionPh: "Descrição",
      amountPh: "Valor",
      dayOfMonthPh: "Dia do mês (1-31)",
      dayOfMonth: (day) => `Dia ${day} do mês`,
      clickToEditDesc: "Clique para editar a descrição",
      clickToEditAmount: "Clique para editar o valor",
      deleteRecurring: "Excluir transação recorrente",
      validationAll: "Por favor, preencha todos os campos",
      validationDayRange: "O dia deve estar entre 1 e 31",
    },
    cards: {
      title: "Cartões de crédito recorrentes",
      saveCard: "Salvar cartão",
      noCards: "Nenhum cartão de crédito",
      addNote: "Adicione cartões para entrada rápida de pagamentos",
      cardNamePh: "Nome do cartão (ex. Nubank)",
      deleteCard: "Excluir cartão",
      dayOfMonth: (day) => `Dia ${day} do mês`,
      clickToEditName: "Clique para editar o nome",
      next: "Próximo:",
      addPayment: "Adicionar pagamento",
      noUpcoming: "Nenhuma data próxima",
      paymentDate: "Data de pagamento:",
      enterAmount: "Por favor, insira um valor",
      noUpcomingInRange: "Nenhuma data de pagamento no período previsto",
    },
    timeline: {
      title: "Linha do tempo do saldo",
      action: "Ação",
      description: "Descrição",
      amount: "Valor",
      balance: "Saldo",
      date: "Data",
      delete: "Excluir transação",
    },
    settings: {
      globalSettings: "Configurações globais",
      darkMode: "Modo escuro",
      lightMode: "Modo claro",
      language: "Idioma",
      currency: "Moeda",
      dateFormat: "Formato de data",
    },
    datepicker: {
      weekdaysShort: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"],
    },
  },
  // Italian (Italiano)
  it: {
    header: {
      title: "MMMF",
      tagline: "Strumento di previsione dei fondi del mercato monetario",
      github: "Vedi su GitHub",
    },
    common: {
      cancel: "Annulla",
      add: "Aggiungi",
      save: "Salva",
      today: "Oggi",
      selectDate: "Seleziona data",
      auto: "Auto",
    },
    balance: {
      accountBalance: "Saldo del conto",
      startingBalance: "Saldo iniziale",
      forecastedBalance: "Saldo previsto",
      netChange: "Variazione netta",
      lowestBalance: "Saldo più basso",
      onDate: "il",
      startingBalanceRow: "Saldo iniziale",
    },
    forecast: {
      settings: "Impostazioni previsione",
      currentDate: "Data attuale",
      forecastUntil: "Previsione fino al",
      quick30: "30 giorni",
      quick60: "60 giorni",
      quick90: "90 giorni",
      daysFromCurrent: "giorni dalla data attuale",
      selectFutureDate: "Seleziona una data futura",
      clearAll: "Cancella tutte le transazioni",
      clearNote: "Le transazioni ricorrenti verranno mantenute",
    },
    transactions: {
      addTransaction: "Aggiungi transazione",
      description: "Descrizione",
      amount: "Importo",
      type: "Tipo",
      debitPayment: "Debito (Pagamento)",
      creditIncome: "Credito (Entrata)",
      date: "Data",
      addBtn: "Aggiungi transazione",
      fillAllFields: "Compila tutti i campi",
      listTitle: (count) => `Transazioni (${count})`,
      noneYet: "Nessuna transazione",
      getStarted: "Aggiungi la tua prima transazione per iniziare",
      delete: "Elimina transazione",
      descriptionPh: "es. Affitto",
      amountPh: "0,00",
    },
    recurring: {
      title: "Transazioni ricorrenti",
      addButton: "+ Aggiungi",
      saveRecurring: "Salva transazione ricorrente",
      noRecurring: "Nessuna transazione ricorrente",
      autoNote:
        "Le transazioni ricorrenti vengono generate automaticamente ogni mese",
      payment: "Pagamento",
      income: "Entrata",
      descriptionPh: "Descrizione",
      amountPh: "Importo",
      dayOfMonthPh: "Giorno del mese (1-31)",
      dayOfMonth: (day) => `Giorno ${day} del mese`,
      clickToEditDesc: "Clicca per modificare la descrizione",
      clickToEditAmount: "Clicca per modificare l'importo",
      deleteRecurring: "Elimina transazione ricorrente",
      validationAll: "Compila tutti i campi",
      validationDayRange: "Il giorno deve essere tra 1 e 31",
    },
    cards: {
      title: "Carte di credito ricorrenti",
      saveCard: "Salva carta",
      noCards: "Nessuna carta di credito",
      addNote: "Aggiungi carte per inserire rapidamente i pagamenti",
      cardNamePh: "Nome carta (es. Visa)",
      deleteCard: "Elimina carta",
      dayOfMonth: (day) => `Giorno ${day} del mese`,
      clickToEditName: "Clicca per modificare il nome",
      next: "Prossimo:",
      addPayment: "Aggiungi pagamento",
      noUpcoming: "Nessuna data imminente",
      paymentDate: "Data di pagamento:",
      enterAmount: "Inserisci un importo",
      noUpcomingInRange: "Nessuna data di pagamento nel periodo previsto",
    },
    timeline: {
      title: "Cronologia del saldo",
      action: "Azione",
      description: "Descrizione",
      amount: "Importo",
      balance: "Saldo",
      date: "Data",
      delete: "Elimina transazione",
    },
    settings: {
      globalSettings: "Impostazioni globali",
      darkMode: "Modalità scura",
      lightMode: "Modalità chiara",
      language: "Lingua",
      currency: "Valuta",
      dateFormat: "Formato data",
    },
    datepicker: {
      weekdaysShort: ["Dom", "Lun", "Mar", "Mer", "Gio", "Ven", "Sab"],
    },
  },
  // Russian (Русский)
  ru: {
    header: {
      title: "MMMF",
      tagline: "Инструмент прогнозирования денежного рынка",
      github: "Смотреть на GitHub",
    },
    common: {
      cancel: "Отмена",
      add: "Добавить",
      save: "Сохранить",
      today: "Сегодня",
      selectDate: "Выберите дату",
      auto: "Авто",
    },
    balance: {
      accountBalance: "Баланс счёта",
      startingBalance: "Начальный баланс",
      forecastedBalance: "Прогнозируемый баланс",
      netChange: "Чистое изменение",
      lowestBalance: "Минимальный баланс",
      onDate: "",
      startingBalanceRow: "Начальный баланс",
    },
    forecast: {
      settings: "Настройки прогноза",
      currentDate: "Текущая дата",
      forecastUntil: "Прогноз до",
      quick30: "30 дней",
      quick60: "60 дней",
      quick90: "90 дней",
      daysFromCurrent: "дней с текущей даты",
      selectFutureDate: "Выберите будущую дату",
      clearAll: "Удалить все транзакции",
      clearNote: "Повторяющиеся транзакции будут сохранены",
    },
    transactions: {
      addTransaction: "Добавить транзакцию",
      description: "Описание",
      amount: "Сумма",
      type: "Тип",
      debitPayment: "Расход",
      creditIncome: "Доход",
      date: "Дата",
      addBtn: "Добавить транзакцию",
      fillAllFields: "Заполните все поля",
      listTitle: (count) => `Транзакции (${count})`,
      noneYet: "Нет транзакций",
      getStarted: "Добавьте первую транзакцию",
      delete: "Удалить транзакцию",
      descriptionPh: "напр. Аренда",
      amountPh: "0,00",
    },
    recurring: {
      title: "Повторяющиеся транзакции",
      addButton: "+ Добавить",
      saveRecurring: "Сохранить повторяющуюся транзакцию",
      noRecurring: "Нет повторяющихся транзакций",
      autoNote:
        "Повторяющиеся транзакции генерируются автоматически каждый месяц",
      payment: "Расход",
      income: "Доход",
      descriptionPh: "Описание",
      amountPh: "Сумма",
      dayOfMonthPh: "День месяца (1-31)",
      dayOfMonth: (day) => `${day}-й день месяца`,
      clickToEditDesc: "Нажмите для редактирования описания",
      clickToEditAmount: "Нажмите для редактирования суммы",
      deleteRecurring: "Удалить повторяющуюся транзакцию",
      validationAll: "Заполните все поля",
      validationDayRange: "День должен быть от 1 до 31",
    },
    cards: {
      title: "Повторяющиеся кредитные карты",
      saveCard: "Сохранить карту",
      noCards: "Нет кредитных карт",
      addNote: "Добавьте карты для быстрого ввода платежей",
      cardNamePh: "Название карты (напр. Сбербанк)",
      deleteCard: "Удалить карту",
      dayOfMonth: (day) => `${day}-й день месяца`,
      clickToEditName: "Нажмите для редактирования названия",
      next: "Следующий:",
      addPayment: "Добавить платёж",
      noUpcoming: "Нет предстоящих дат",
      paymentDate: "Дата платежа:",
      enterAmount: "Введите сумму",
      noUpcomingInRange: "Нет даты платежа в прогнозируемом периоде",
    },
    timeline: {
      title: "Временная шкала баланса",
      action: "Действие",
      description: "Описание",
      amount: "Сумма",
      balance: "Баланс",
      date: "Дата",
      delete: "Удалить транзакцию",
    },
    settings: {
      globalSettings: "Глобальные настройки",
      darkMode: "Тёмный режим",
      lightMode: "Светлый режим",
      language: "Язык",
      currency: "Валюта",
      dateFormat: "Формат даты",
    },
    datepicker: {
      weekdaysShort: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"],
    },
  },
};

const I18nContext = createContext({
  language: "en",
  setLanguage: () => {},
  t: (key, ...args) => key,
});

export function I18nProvider({ language, setLanguage, children }) {
  const t = useMemo(() => {
    return (key, ...args) => {
      const [ns, k] = key.split(":");
      const langTable = translations[language] || translations.en;
      const segments = (k || ns).split(".");
      let node = ns && k ? langTable[ns] : langTable;
      for (const seg of segments) {
        if (!node) break;
        node = node[seg];
      }
      if (typeof node === "function") {
        return node(...args);
      }
      if (typeof node === "string") {
        return node;
      }
      if (Array.isArray(node)) {
        return node;
      }
      return key; // fallback to key
    };
  }, [language]);

  const value = useMemo(
    () => ({ language, setLanguage, t }),
    [language, setLanguage, t],
  );
  return React.createElement(I18nContext.Provider, { value }, children);
}

export function useI18n() {
  return useContext(I18nContext);
}
